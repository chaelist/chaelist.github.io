<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<link rel="shortcut icon" href="https://chaelist.github.io/assets/images/cat.png" type="image/x-icon">
<link rel="stylesheet" href="https://chaelist.github.io/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-QJ6H6890X3"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-QJ6H6890X3'); </script> <script type="text/javascript" src="https://chaelist.github.io/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="https://chaelist.github.io/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1">
<title>데이터 조회 심화 | chaelist</title>
<meta name="generator" content="Jekyll v4.2.1">
<meta property="og:title" content="데이터 조회 심화">
<meta property="og:locale" content="en_US">
<meta name="description" content="chaelist’s blog">
<meta property="og:description" content="chaelist’s blog">
<link rel="canonical" href="https://chaelist.github.io/docs/sql/select_advanced/">
<meta property="og:url" content="https://chaelist.github.io/docs/sql/select_advanced/">
<meta property="og:site_name" content="chaelist">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="데이터 조회 심화"> <script type="application/ld+json"> {"description":"chaelist’s blog","url":"https://chaelist.github.io/docs/sql/select_advanced/","@type":"WebPage","headline":"데이터 조회 심화","@context":"https://schema.org"}</script>
</head>
<body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewbox="0 0 24 24"><title>Link</title>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"><title>Search</title>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"><title>Menu</title>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"><title>Expand</title>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"><title>Document</title>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar">
<div class="site-header"> <a href="https://chaelist.github.io/" class="site-title lh-tight"> chaelist </a> <a href="#" id="menu-button" class="site-button"> <svg viewbox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a>
</div>
<nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list">
<li class="nav-list-item"><a href="https://chaelist.github.io/" class="nav-list-link">Home</a></li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/python_basics" class="nav-list-link">Python 기초</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/python_basics/numbers_list_string/" class="nav-list-link">Numbers, List, String</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/python_basics/dictionary_tuple_set/" class="nav-list-link">Dictionary, Tuple, Set</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/python_basics/controlflow/" class="nav-list-link">Control Flow (제어문)</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/python_basics/function_module/" class="nav-list-link">Function &amp; Module</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/data_handling" class="nav-list-link">Data Handling</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/data_handling/file_input_output/" class="nav-list-link">파일 읽고 쓰기</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/data_handling/file_folder_handling/" class="nav-list-link">파일 &amp; 폴더 다루기</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/data_handling/regular_expressions/" class="nav-list-link">Regular Expressions</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/data_handling/useful_functions/" class="nav-list-link">유용한 Python 내장함수</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/data_handling/datetime/" class="nav-list-link">Datetime 다루기</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/numpy" class="nav-list-link">Numpy</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/numpy/numpy_basics/" class="nav-list-link">Numpy 기초</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/numpy/numpy_arithmetics/" class="nav-list-link">Numpy 연산과 통계</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/pandas" class="nav-list-link">Pandas</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/pandas/pandas_basics/" class="nav-list-link">Pandas 기초</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/pandas/pandas_data_modifying/" class="nav-list-link">Pandas 데이터 가공</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/pandas/pandas_data_analysis/" class="nav-list-link">Pandas 데이터 분석</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/pandas/pandas_merge_group/" class="nav-list-link">Pandas 데이터 결합 &amp; 요약</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/pandas/pandas_str_dt_con/" class="nav-list-link">Pandas str, dt, 조건문</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/visualization" class="nav-list-link">데이터 시각화</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/visualization/pandas_plot/" class="nav-list-link">Pandas plot() 함수</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/visualization/seaborn/" class="nav-list-link">Seaborn</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/visualization/matplotlib/" class="nav-list-link">Matplotlib</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/visualization/plotly/" class="nav-list-link">Plotly</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/webscraping" class="nav-list-link">Web Scraping</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/webscraping/requests_beautifulsoup/" class="nav-list-link">Requests &amp; BeautifulSoup</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/webscraping/selenium/" class="nav-list-link">Selenium</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/webscraping/image_api/" class="nav-list-link">Image 수집 &amp; API 활용</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/webscraping/twitter_api/" class="nav-list-link">Twitter 데이터 수집</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/webscraping/app_review/" class="nav-list-link">App Review 수집</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/text_analysis" class="nav-list-link">Text 분석</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/text_analysis/english_text/" class="nav-list-link">빈도 분석 (English)</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/text_analysis/korean_text/" class="nav-list-link">빈도 분석 (한글)</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/network_analysis" class="nav-list-link">Network Analysis</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/network_analysis/network_basics/" class="nav-list-link">Network Analysis 기초</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/network_analysis/social_network/" class="nav-list-link">Social Network Analysis</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/network_analysis/semantic_network/" class="nav-list-link">Semantic Network Analysis</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/ml_basics" class="nav-list-link">Machine Learning 기초</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_basics/linear_regression/" class="nav-list-link">기초 &amp; Linear Regression</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_basics/classification1/" class="nav-list-link">Classification 1</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_basics/classification2/" class="nav-list-link">Classification 2</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_basics/clustering/" class="nav-list-link">Clustering</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_basics/deep_learning/" class="nav-list-link">Deep Learning 기초</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/ml_advanced" class="nav-list-link">Machine Learning 심화</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_advanced/regularization/" class="nav-list-link">Regularization</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_advanced/preprocessing/" class="nav-list-link">데이터 전처리</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_advanced/model_selection/" class="nav-list-link">Model Selection</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/ml_application" class="nav-list-link">Machine Learning 응용</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_application/sentiment_analysis/" class="nav-list-link">영화 리뷰 감성 분석</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_application/news_clustering/" class="nav-list-link">뉴스 기사 Clustering</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_application/time_series/" class="nav-list-link">시계열 데이터 예측</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_application/topic_modeling/" class="nav-list-link">Topic Modeling (LDA)</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_application/logistics/" class="nav-list-link">물류 최적화</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/ml_application/image_processing/" class="nav-list-link">이미지 / 동영상 처리</a></li>
</ul>
</li>
<li class="nav-list-item active">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/sql" class="nav-list-link">SQL</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/sql/select_basics/" class="nav-list-link">데이터 조회 기초</a></li>
<li class="nav-list-item active"><a href="https://chaelist.github.io/docs/sql/select_advanced/" class="nav-list-link active">데이터 조회 심화</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/sql/join_subq_view/" class="nav-list-link">조인, 서브쿼리, 뷰</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/sql/db_table_create/" class="nav-list-link">데이터베이스 &amp; 테이블 구축</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/sql/modify_table/" class="nav-list-link">테이블 가공</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/sql/foreign_key_pymysql/" class="nav-list-link">Foreign Key &amp; Python 연결</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://chaelist.github.io/docs/kaggle" class="nav-list-link">Kaggle Dataset EDA</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/kaggle/youtube_trending/" class="nav-list-link">YouTube Trending Videos</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/kaggle/amazon_bestsellers/" class="nav-list-link">Amazon Bestselling Books</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/kaggle/customer_churn/" class="nav-list-link">Telco Customer Churn</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/kaggle/kiva_crowdfunding/" class="nav-list-link">Kiva Crowdfunding 1</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/kaggle/kiva_crowdfunding2/" class="nav-list-link">Kiva Crowdfunding 2</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/kaggle/stem_salaries/" class="nav-list-link">STEM Salaries 1</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/kaggle/stem_salaries2/" class="nav-list-link">STEM Salaries 2</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/kaggle/uk_ecommerce/" class="nav-list-link">UK Ecommerce Data 1</a></li>
<li class="nav-list-item "><a href="https://chaelist.github.io/docs/kaggle/uk_ecommerce2/" class="nav-list-link">UK Ecommerce Data 2</a></li>
</ul>
</li>
</ul></nav><footer class="site-footer"></footer>
</div>
<div class="main" id="top">
<div id="main-header" class="main-header"><div class="search">
<div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search chaelist" aria-label="Search chaelist" autocomplete="off"> <label for="search-input" class="search-label"><svg viewbox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
</div>
<div id="search-results" class="search-results"></div>
</div></div>
<div id="main-content-wrap" class="main-content-wrap">
<nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list">
<li class="breadcrumb-nav-list-item"><a href="https://chaelist.github.io/docs/sql">SQL</a></li>
<li class="breadcrumb-nav-list-item"><span>데이터 조회 심화</span></li>
</ol></nav><div id="main-content" class="main-content" role="main">
<h1 class="no_toc" id="데이터-조회-심화"> <a href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A1%B0%ED%9A%8C-%EC%8B%AC%ED%99%94" aria-labelledby="데이터-조회-심화" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 데이터 조회 심화</h1>
<p><br></p>
<details open=""> <summary class="text-delta"> Table of contents </summary><ol id="markdown-toc">
<li>
<a href="#%EC%A7%91%EA%B3%84%EC%82%B0%EC%88%A0-%ED%95%A8%EC%88%98" id="markdown-toc-집계산술-함수">집계/산술 함수</a><ol>
<li><a href="#%EC%A7%91%EA%B3%84-%ED%95%A8%EC%88%98" id="markdown-toc-집계-함수">집계 함수</a></li>
<li><a href="#%EC%82%B0%EC%88%A0-%ED%95%A8%EC%88%98" id="markdown-toc-산술-함수">산술 함수</a></li>
</ol>
</li>
<li><a href="#%EB%AC%B8%EC%9E%90%EC%97%B4-%EA%B0%80%EA%B3%B5-%ED%95%A8%EC%88%98" id="markdown-toc-문자열-가공-함수">문자열 가공 함수</a></li>
<li>
<a href="#null%EA%B0%92-%EB%8B%A4%EB%A3%A8%EA%B8%B0--%EC%A4%91%EB%B3%B5-%EC%A0%9C%EA%B1%B0" id="markdown-toc-null값-다루기--중복-제거">Null값 다루기 &amp; 중복 제거</a><ol>
<li><a href="#coalesce-null%EA%B0%92-%EB%8C%80%EC%B2%B4" id="markdown-toc-coalesce-null값-대체">COALESCE(): NULL값 대체</a></li>
<li><a href="#distinct-%EC%A4%91%EB%B3%B5-%EC%A0%9C%EA%B1%B0-%ED%99%95%EC%9D%B8" id="markdown-toc-distinct-중복-제거-확인">DISTINCT(): 중복 제거 확인</a></li>
</ol>
</li>
<li><a href="#%EC%BB%AC%EB%9F%BC-%EA%B0%84-%EA%B3%84%EC%82%B0%EC%97%B0%EA%B2%B0" id="markdown-toc-컬럼-간-계산연결">컬럼 간 계산/연결</a></li>
<li><a href="#case-%EC%A1%B0%EA%B1%B4%EB%AC%B8%EC%9C%BC%EB%A1%9C-%EA%B0%80%EA%B3%B5" id="markdown-toc-case-조건문으로-가공">CASE: 조건문으로 가공</a></li>
<li>
<a href="#group-by-%EA%B7%B8%EB%A3%A8%ED%95%91%ED%95%B4%EC%84%9C-%EB%B3%B4%EA%B8%B0" id="markdown-toc-group-by-그루핑해서-보기">GROUP BY: 그루핑해서 보기</a><ol>
<li><a href="#having" id="markdown-toc-having">HAVING</a></li>
<li><a href="#with-rollup" id="markdown-toc-with-rollup">WITH ROLLUP</a></li>
</ol>
</li>
<li><a href="#select%EB%AC%B8-%EA%B0%81-%EC%A0%88%EC%9D%98-%EC%9E%91%EC%84%B1-%EC%88%9C%EC%84%9C" id="markdown-toc-select문-각-절의-작성-순서">SELECT문: 각 절의 작성 순서</a></li>
</ol></details><hr>
<h2 id="집계산술-함수"> <a href="#%EC%A7%91%EA%B3%84%EC%82%B0%EC%88%A0-%ED%95%A8%EC%88%98" aria-labelledby="집계산술-함수" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 집계/산술 함수</h2>
<h3 id="집계-함수"> <a href="#%EC%A7%91%EA%B3%84-%ED%95%A8%EC%88%98" aria-labelledby="집계-함수" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 집계 함수</h3>
<p>: 특정 칼럼의 여러 row 값들을 동시에 고려해서 실행되는 함수.<br> 아래 함수들은 계산할 때 null값은 고려하지 않고 계산된다. (null값은 제외하고 계산)</p>
<ol>
<li>COUNT<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- email 칼럼에 존재하는 null을 제외한 값의 수를 구해준다</span>
<span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="n">email</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span> 
</code></pre></div></div>
<ul><li>다만, 특정 칼럼에 COUNT()를 적용하면 null값이 제외된 개수를 구해주기 때문에, 전체 테이블의 row 수를 구해주려면 아래와 같이 전체에 COUNT()를 적용해주는 것이 좋다<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span> <span class="c1">-- 전체 테이블의 row 수 구하기</span>
</code></pre></div></div>
</li></ul>
</li>
<li>MAX<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 키의 최댓값 구하기</span>
<span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">height</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
<ul><li>+) GREATEST(칼럼1, 칼럼2, 칼럼3): 각 row에서, 가장 큰 값을 가진 칼럼의 값을 찾아줌. <br> (cf. MAX는 특정 칼럼 내의 최댓값을 계산)</li></ul>
</li>
<li>MIN<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 키의 최솟값 구하기</span>
<span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="n">height</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
<ul><li>+) LEAST(칼럼1, 칼럼2, 칼럼3): 각 row에서, 가장 작은 값을 가진 칼럼의 값을 찾아줌. <br> (cf. MIN는 특정 칼럼 내의 최솟값을 계산)</li></ul>
</li>
<li>AVG<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 키의 평균값 구하기</span>
<span class="k">SELECT</span> <span class="k">AVG</span><span class="p">(</span><span class="n">height</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span> 
</code></pre></div></div>
</li>
<li>SUM<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 나이의 총합 구하기</span>
<span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
</li>
<li>STD<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">-</span> <span class="err">나이의</span> <span class="err">표준편차</span> <span class="err">구하기</span>
<span class="k">SELECT</span> <span class="n">STD</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
</li>
</ol>
<h3 id="산술-함수"> <a href="#%EC%82%B0%EC%88%A0-%ED%95%A8%EC%88%98" aria-labelledby="산술-함수" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 산술 함수</h3>
<p>: 특정 칼럼의 각 row마다 실행되는 함수</p>
<ol>
<li>ABS: 절대값을 구하는 함수</li>
<li>SQRT: 제곱근을 구하는 함수</li>
<li>CEIL: 올림을 해주는 함수<ul><li>ex) 178.4라는 데이터 → <code class="language-plaintext highlighter-rouge">CEIL(height)</code>로 출력하면 179라고 출력됨</li></ul>
</li>
<li>FLOOR: 내림을 해주는 함수</li>
<li>ROUND: 반올림을 해주는 함수<ul>
<li>ex) <code class="language-plaintext highlighter-rouge">ROUND(값, 1)</code>이라고 하면 소수점 첫번째 자리까지 반올림해서 출력</li>
<li>+) ROUND는 소수점 둘째자리의 수를 기반으로 반올림을 해주는 반면, <code class="language-plaintext highlighter-rouge">TRUNCATE(값, 1)</code>이라고 하면 소수점 첫번째 자리까지 내림을 해서 출력해준다 (그냥 단순하게 둘째자리부터는 버림)</li>
</ul>
</li>
<li>POW: 제곱을 해주는 함수<ul><li>ex) <code class="language-plaintext highlighter-rouge">POW(값, 2)</code>라고 하면 제곱, <code class="language-plaintext highlighter-rouge">POW(값, 3)</code>이라고 하변 세제곱</li></ul>
</li>
</ol>
<p>+) 그 외 다양한 산술 함수: <a href="https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html" target="_blank">https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html</a></p>
<h2 id="문자열-가공-함수"> <a href="#%EB%AC%B8%EC%9E%90%EC%97%B4-%EA%B0%80%EA%B3%B5-%ED%95%A8%EC%88%98" aria-labelledby="문자열-가공-함수" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 문자열 가공 함수</h2>
<ol>
<li>SUBSTRING(칼럼, m, n): 특정 칼럼의 m번째 위치부터 n개의 글자만 추출<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">SUBSTRING</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
<span class="c1">-- '서울특별시 중구 서소문로 00'와 같은 주소 → '특별시'라고 출력됨 (3번째 위치에서부터 3개의 글자만 추출)</span>
</code></pre></div></div>
</li>
<li>
<p>LEFT, RIGHT: 좌우 몇 개의 글자만 잘라서 추출해주는 함수</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- address 중 왼쪽으로부터 2개의 글자만 잘라서 추출 (ex. '서울특별시 신촌로'라면 '서울'만 추출)</span>
 <span class="k">SELECT</span> <span class="k">LEFT</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- address 중 오른쪽으로부터 3개의 글자만 잘라서 추출 (ex. '서울특별시 신촌로'라면 '신촌로'만 추출)</span>
 <span class="k">SELECT</span> <span class="k">RIGHT</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
</li>
<li>LENGTH(): 문자열의 길이를 구해줌<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">LENGTH</span><span class="p">(</span><span class="n">address</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
<span class="c1">-- `안드로메다 128행성`이라는 주소 → LENGHT()의 결과는 25</span>
</code></pre></div></div>
<ul>
<li>※ 다만, LENGTH() 함수는 문자의 Byte길이를 가져오기 때문에 한글의 경우 정확한 길이를 알기 어렵다</li>
<li>대신 <strong>CHAR_LENGTH()</strong> 함수를 사용하면 몇 개의 글자가 사용되었는지 파악 가능. (공백도 포함해 계산)<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">SELECT</span> <span class="k">CHAR_LENGTH</span><span class="p">(</span><span class="n">address</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
 <span class="c1">-- `안드로메다 128행성`이라는 주소 → CHAR_LENGTH()의 결과는 11</span>
</code></pre></div></div>
</li>
</ul>
</li>
<li>UPPER, LOWER<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- 모든 문자를 대문자로 변환</span>
 <span class="k">SELECT</span> <span class="k">UPPER</span><span class="p">(</span><span class="n">address</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- 모든 문자를 소문자로 변환</span>
 <span class="k">SELECT</span> <span class="k">LOWER</span><span class="p">(</span><span class="n">address</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
</li>
<li>
<p>LPAD, RPAD: 문자열의 왼쪽(LPAD) 또는 오른쪽(RPAD)을 특정 문자열로 채워주는 함수<br> (*보통 어떤 숫자의 자리수를 맞출 때 자주 사용)</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- age 컬럼의 값을, 왼쪽에 문자 0을 붙여서 총 10자리로 만들어 준다</span>
 <span class="k">SELECT</span> <span class="n">email</span><span class="p">,</span> <span class="n">LPAD</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'0'</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span> 
 <span class="c1">-- ex) 28 → 0000000028, 101 → 0000000101</span>
</code></pre></div></div>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- age 컬럼의 값을, 오른쪽에 !를 붙여서 총 5자리로 만들어 준다</span>
 <span class="k">SELECT</span> <span class="n">email</span><span class="p">,</span> <span class="n">RPAD</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'!'</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span> 
 <span class="c1">-- ex) 28 → 28!!!, 101 → 101!!  </span>
</code></pre></div></div>
<ul><li>※ 사실 age 칼럼은 INT 타입이지만, 숫자도 문자열 함수 안에 인자로 넣어주면 그 값이 자동으로 문자열로 형 변환이 되어 계산된다</li></ul>
</li>
<li>TRIM, LTRIM, RTRIM: 문자열 양 끝에 존재하는 공백을 제거하는 함수<ul>
<li>LTRIM(word): 왼쪽 공백 삭제</li>
<li>RTRIM(word): 오른쪽 공백 삭제</li>
<li>TRIM(word): 왼쪽, 오른쪽 양쪽 공백 모두 삭제</li>
</ul>
</li>
<li>REPLACE(칼럼, ‘문자1’, ‘문자2’): 특정 칼럼에서 문자1을 문자2로 모두 대체해줌<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- address에서 '서울'이라는 모든 문자를 '부산'으로 변경해서 출력</span>
 <span class="k">SELECT</span> <span class="k">REPLACE</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="s1">'서울'</span><span class="p">,</span> <span class="s1">'부산'</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
<ul><li>+) INT 타입에도 그대로 적용 가능:<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- 정수형 타입인 'salary'에서 숫자 중간 중간에 들어가는 0을 모두 삭제해서 출력</span>
 <span class="k">SELECT</span> <span class="k">REPLACE</span><span class="p">(</span><span class="n">salary</span><span class="p">,</span> <span class="s1">'0'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
</li></ul>
</li>
</ol>
<h2 id="null값-다루기--중복-제거"> <a href="#null%EA%B0%92-%EB%8B%A4%EB%A3%A8%EA%B8%B0--%EC%A4%91%EB%B3%B5-%EC%A0%9C%EA%B1%B0" aria-labelledby="null값-다루기--중복-제거" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Null값 다루기 &amp; 중복 제거</h2>
<ol><li>Null값만 / Null값 제외하고 출력<ul><li>NULL은 어떤 값도 아니기에, = NULL, != NULL 이렇게는 표현할 수 없고, IS NULL 혹은 IS NOT NULL이라고 표현해야 함</li></ul>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- address 칼럼이 null값인 데이터만 조회</span>
 <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">tablename</span> <span class="k">WHERE</span> <span class="n">address</span> <span class="k">IS</span> <span class="k">NULL</span><span class="p">;</span> 
</code></pre></div></div>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- address 칼럼이 null값이 아닌 데이터만 조회</span>
 <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">tablename</span> <span class="k">WHERE</span> <span class="n">address</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">;</span> 
</code></pre></div></div>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- address, height, weight 세 칼럼 중 하나라도 null값이 있는 데이터 조회</span>
 <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">tablename</span> 
 <span class="k">WHERE</span> <span class="n">address</span> <span class="k">IS</span> <span class="k">NULL</span> <span class="k">OR</span> <span class="n">height</span> <span class="k">IS</span> <span class="k">NULL</span> <span class="k">OR</span> <span class="n">weight</span> <span class="k">IS</span> <span class="k">NULL</span><span class="p">;</span> 
</code></pre></div></div>
</li></ol>
<h3 id="coalesce-null값-대체"> <a href="#coalesce-null%EA%B0%92-%EB%8C%80%EC%B2%B4" aria-labelledby="coalesce-null값-대체" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> COALESCE(): NULL값 대체</h3>
<ul><li>COALESCE(값1, 값2): null이 아니면 값1을, null이면 값2를 돌려줌<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span>
  <span class="n">COALESCE</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="s1">'####'</span><span class="p">),</span>
  <span class="n">COALESCE</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span> <span class="s1">'---'</span><span class="p">),</span>
  <span class="n">COALESCE</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="s1">'@@@'</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
<span class="c1">-- height 칼럼의 null 부분은 ####가, weight 칼럼은 ---, address는 @@@가 출력됨</span>
</code></pre></div></div>
</li></ul>
<p><strong>+) NULL값을 변환하는 다양한 방법</strong></p>
<ol>
<li>
<code class="language-plaintext highlighter-rouge">COALESCE(height, 'N/A')</code> – height 칼럼의 null값을 ‘N/A’라는 text로 채워줌</li>
<li>
<code class="language-plaintext highlighter-rouge">COALESCE(height, weight * 2.3, 'N/A')</code> – height 칼럼의 null값을 우선 weight에 2.3을 곱한 값으로 넣어주고, 만약 weight 칼럼도 NULL이면 ‘N/A’로 채워줌</li>
<li>
<code class="language-plaintext highlighter-rouge">IFNULL(height, 'N/A')</code> – height 칼럼의 null값을 ‘N/A’라는 text로 채워줌<ul><li>COALESCE(height, ‘N/A’)와 같지만, IFNULL은 mysql에서만 지원하는 함수이고 COALESCE는 SQL 표준 함수이다</li></ul>
</li>
<li>
<code class="language-plaintext highlighter-rouge">IF(height IS NOT NULL, height, 'N/A')</code> – height가 NULL이 아니면 height값을 return하고, NULL이면 ‘N/A’라는 text를 return<ul>
<li>IF(조건식, 결과1, 결과2): 조건식이 True면 결과1을, False면 결과2를 return하라는 구문</li>
<li>IF 구문은 NULL값 반환 이외의 다양한 조건에도 응용할 수 있다</li>
</ul>
</li>
</ol>
<h3 id="distinct-중복-제거-확인"> <a href="#distinct-%EC%A4%91%EB%B3%B5-%EC%A0%9C%EA%B1%B0-%ED%99%95%EC%9D%B8" aria-labelledby="distinct-중복-제거-확인" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> DISTINCT(): 중복 제거 확인</h3>
<ul>
<li>DISTINCT 함수: Unique한 값만 확인하게 해주는 함수<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">-- gender 칼럼의 고유값만 확인</span>
  <span class="k">SELECT</span> <span class="k">DISTINCT</span><span class="p">(</span><span class="n">gender</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span> 
</code></pre></div></div>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">-- address 칼럼의 가장 앞 두 글자(ex. 경기, 서울, 전라)만 추출해서 고유값만 확인</span>
  <span class="k">SELECT</span> <span class="k">DISTINCT</span><span class="p">(</span><span class="k">SUBSTRING</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
</li>
<li>+) 고유값 개수 구하기<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">-- gender 칼럼에 있는 고유값의 개수를 세어줌</span>
  <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="p">(</span><span class="n">gender</span><span class="p">))</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span> 
</code></pre></div></div>
</li>
</ul>
<h2 id="컬럼-간-계산연결"> <a href="#%EC%BB%AC%EB%9F%BC-%EA%B0%84-%EA%B3%84%EC%82%B0%EC%97%B0%EA%B2%B0" aria-labelledby="컬럼-간-계산연결" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 컬럼 간 계산/연결</h2>
<ol>
<li>컬럼 산술연산: + (더하기), - (빼기), * (곱하기), / (나누기), % (나머지 구하기)<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- 이메일, 키, 몸무게, BMI (몸무게(kg) / 키(m)^2)를 출력</span>
 <span class="c1">-- BMI 계산할 때 키는 보통 m단위로 넣으므로 100을 나눠서 제곱해줌</span>
 <span class="k">SELECT</span> <span class="n">email</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight</span> <span class="o">/</span> <span class="p">((</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span>
 <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span> 
</code></pre></div></div>
<ul><li>연산시, 한 컬럼이라도 NULL이면 계산식의 결과도 NULL</li></ul>
</li>
<li>alias 붙이기: ‘<strong>AS</strong>’ 사용<ul>
<li>원래의 컬럼 이름을 다른 이름으로 교체해서 보여주는 것.</li>
<li>단순히 계산식만 보이는 것보다, 보다 직관적인 alias를 붙여서 보여주면 이해하기 쉽다</li>
<li>
<code class="language-plaintext highlighter-rouge">SELECT column AS alias</code>와 같은 식으로 AS를 사용하거나, <code class="language-plaintext highlighter-rouge">SELECT column alias</code>와 같이 빈칸을 한 칸 두고 뒤에 써줘도 된다<br> (하지만 AS를 쓰는 습관을 들이면 조금 더 직관적으로 이해하기 쉬운 코드가 된다)</li>
</ul>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">SELECT</span> <span class="n">email</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> 
     <span class="n">weight</span> <span class="o">/</span> <span class="p">((</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span> <span class="k">AS</span> <span class="n">BMI</span>
 <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
 <span class="c1">-- 이렇게 적으면 weight / ((height/100) * (height/100)) 계산 결과 칼럼은 'BMI'라는 이름으로 출력됨</span>
</code></pre></div></div>
</li>
<li>
<strong>CONCAT</strong>: 여러 컬럼을 원하는 형식으로 연결해 출력<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- '165.5cm, 67.3kg'와 같은 형식으로, height와 weight 컬럼이 결합되어 출력됨</span>
 <span class="k">SELECT</span> <span class="n">CONCAT</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="s1">'cm, '</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="s1">'kg'</span><span class="p">)</span> <span class="k">AS</span> <span class="s1">'키와 몸무게'</span> <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
<ul><li>cf) ‘키와 몸무게’처럼 alias에 빈칸이 있을 경우, ‘‘나 ““로 감싸서 구분해줘야 한다</li></ul>
</li>
</ol>
<h2 id="case-조건문으로-가공"> <a href="#case-%EC%A1%B0%EA%B1%B4%EB%AC%B8%EC%9C%BC%EB%A1%9C-%EA%B0%80%EA%B3%B5" aria-labelledby="case-조건문으로-가공" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CASE: 조건문으로 가공</h2>
<ol>
<li>단순 CASE 함수: CASE 뒤에 컬럼을 적고, 그 컬럼의 값과 어떤 특정한 값이 같은지(=) 비교<ul>
<li>구조: (WHEN ~ THEN ~ 은 원하는 만큼 사용 가능)<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">CASE</span>  <span class="err">칼럼</span> <span class="err">이름</span>
   <span class="k">WHEN</span> <span class="err">값</span> <span class="k">THEN</span> <span class="err">출력할</span> <span class="err">내용</span>
   <span class="k">ELSE</span> <span class="err">출력할</span> <span class="err">내용</span> 
 <span class="k">END</span>
</code></pre></div></div>
</li>
<li>예시:<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- age 값이 29면 '스물 아홉'으로, 30이면 '서른'으로 바꿔서 출력</span>
 <span class="k">SELECT</span> <span class="n">email</span><span class="p">,</span>
 <span class="k">CASE</span> <span class="n">age</span>
   <span class="k">WHEN</span> <span class="mi">29</span> <span class="k">THEN</span> <span class="err">‘스물</span> <span class="err">아홉’</span>
   <span class="k">WHEN</span> <span class="mi">30</span> <span class="k">THEN</span> <span class="err">‘서른’</span>
   <span class="k">ELSE</span> <span class="n">age</span>
 <span class="k">END</span>
 <span class="k">FROM</span> <span class="n">tablename</span><span class="p">;</span>
</code></pre></div></div>
</li>
</ul>
</li>
<li>검색 CASE 함수: 특정 조건에 따라 특정 값을 돌려준다. (단순 CASE 함수보다 다양한 연산이 가능)<ul>
<li>
<p>구조: (WHEN ~ THEN ~ 은 원하는 만큼 사용 가능)</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">CASE</span> 
      <span class="k">WHEN</span> <span class="err">조건</span> <span class="k">THEN</span> <span class="err">출력할</span> <span class="err">내용</span>
      <span class="k">ELSE</span> <span class="err">출력할</span> <span class="err">내용</span> 
  <span class="k">END</span>
</code></pre></div></div>
</li>
<li>
<p>예시:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">SELECT</span> 
      <span class="n">CONCAT</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="s1">'cm, '</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="s1">'kg'</span><span class="p">)</span> <span class="k">AS</span> <span class="s1">'키와 몸무게'</span><span class="p">,</span>
      <span class="n">weight</span> <span class="o">/</span> <span class="p">((</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span> <span class="k">AS</span> <span class="n">BMI</span><span class="p">,</span>

  <span class="p">(</span><span class="k">CASE</span>
      <span class="k">WHEN</span> <span class="n">weight</span> <span class="k">IS</span> <span class="k">NULL</span> <span class="k">or</span> <span class="n">height</span> <span class="k">IS</span> <span class="k">NULL</span> <span class="k">THEN</span> <span class="s1">'비만 여부 알 수 없음'</span>
      <span class="k">WHEN</span> <span class="n">weight</span> <span class="o">/</span> <span class="p">((</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="mi">25</span> <span class="k">THEN</span> <span class="s1">'과체중'</span>
      <span class="k">WHEN</span> <span class="n">weight</span> <span class="o">/</span> <span class="p">((</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="mi">18</span><span class="p">.</span><span class="mi">25</span>
  <span class="k">AND</span> <span class="n">weight</span> <span class="o">/</span> <span class="p">((</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">25</span>
  <span class="k">THEN</span> <span class="s1">'정상'</span>
      <span class="k">ELSE</span> <span class="s1">'저체중'</span>
  <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="n">obesity_check</span>

  <span class="k">FROM</span> <span class="n">tablename</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">obesity_check</span> <span class="k">ASC</span><span class="p">;</span>
</code></pre></div></div>
</li>
<li>BMI에 따라 ‘과체중’ , ‘정상’, ‘저체중’으로 나누어 결과를 보여주는 칼럼을 새로 생성해 출력</li>
<li>+) CASE의 경우, alias를 붙여주는 게 좋다 (이 경우는 obesity_check라는 이름으로 출력됨)</li>
<li>+) ORDER BY obesity_check ASC도 붙여줬으므로 obesity_check 칼럼을 기준으로 오름차순 정렬되어 출력</li>
</ul>
</li>
</ol>
<div class="code-example">
<p>+) 위 SQL문을 <a href="../join_subq_view/#%EC%84%9C%EB%B8%8C%EC%BF%BC%EB%A6%AC-subquery">서브쿼리</a>를 활용해 더 간결하게 표현하기:</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">email</span><span class="p">,</span> <span class="n">BMI</span><span class="p">,</span>
<span class="p">(</span><span class="k">CASE</span> 
    <span class="k">WHEN</span> <span class="n">weight</span> <span class="k">IS</span> <span class="k">NULL</span> <span class="k">OR</span> <span class="n">height</span> <span class="k">IS</span> <span class="k">NULL</span> <span class="k">THEN</span> <span class="s1">'비만 여부 알 수 없음'</span>
    <span class="k">WHEN</span> <span class="n">BMI</span> <span class="o">&gt;=</span> <span class="mi">25</span> <span class="k">THEN</span> <span class="s1">'과체중'</span>
    <span class="k">WHEN</span> <span class="n">BMI</span> <span class="o">&gt;=</span> <span class="mi">18</span><span class="p">.</span><span class="mi">5</span> 
        <span class="k">AND</span> <span class="n">BMI</span> <span class="o">&lt;</span> <span class="mi">25</span> <span class="k">THEN</span> <span class="s1">'정상'</span>
    <span class="k">ELSE</span> <span class="s1">'저체중'</span>
<span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="n">obesity_check</span>

<span class="k">FROM</span> 
    <span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span><span class="p">,</span> <span class="n">weight</span><span class="o">/</span><span class="p">((</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span> <span class="k">AS</span> <span class="n">BMI</span>
    <span class="k">FROM</span> <span class="n">tablename</span><span class="p">)</span> <span class="k">AS</span> <span class="n">subquery_for_BMI</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">obesity_check</span> <span class="k">ASC</span><span class="p">;</span>
</code></pre></div></div>
</div>
<h2 id="group-by-그루핑해서-보기"> <a href="#group-by-%EA%B7%B8%EB%A3%A8%ED%95%91%ED%95%B4%EC%84%9C-%EB%B3%B4%EA%B8%B0" aria-labelledby="group-by-그루핑해서-보기" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> GROUP BY: 그루핑해서 보기</h2>
<ol>
<li>집계함수(COUNT, AVG, MIN, MAX 등)과 함께 사용<ul><li>※규칙: GROUP BY를 사용할 때는, SELECT 절에 (1) GROUP BY 뒤에 나오는 칼럼들 또는 (2) 집계함수만 쓸 수 있다!</li></ul>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- 각 gender별 회원 수 조회 (m: 15, f: 9)</span>
 <span class="n">ex</span><span class="p">)</span> <span class="k">SELECT</span> <span class="n">gender</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">gender</span><span class="p">;</span> 

 <span class="c1">-- 각 gender별 평균 키를 조회 (m: 176.55, f:173.7)</span>
 <span class="n">ex</span><span class="p">)</span> <span class="k">SELECT</span> <span class="n">gender</span><span class="p">,</span> <span class="k">AVG</span><span class="p">(</span><span class="n">height</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">gender</span><span class="p">;</span>

 <span class="c1">-- 각 gender별 최소 몸무게를 조회 (m: 58, f: 47)</span>
 <span class="k">SELECT</span> <span class="n">gender</span><span class="p">,</span> <span class="k">MIN</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">tablename</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">gender</span><span class="p">;</span> 
</code></pre></div></div>
</li>
<li>기존 컬럼이 아닌, 새로운 기준을 만들어 그루핑하는 것도 가능<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- 지역별(ex. 서울, 경기, 대전) 회원 수 확인</span>
 <span class="c1">-- address의 맨 첫글자 2개만 추출해서 활용 (ex. 서울)</span>
 <span class="k">SELECT</span> 
     <span class="k">SUBSTRING</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">AS</span> <span class="n">region</span><span class="p">,</span>
     <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
 <span class="k">FROM</span> <span class="n">tablename</span> 
 <span class="k">GROUP</span> <span class="k">BY</span> <span class="k">SUBSTRING</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> 
</code></pre></div></div>
</li>
<li>2가지 이상의 기준으로도 그루핑 가능<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">-- 지역별*성별 회원 수 확인</span>
 <span class="k">SELECT</span> 
     <span class="k">SUBSTRING</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">AS</span> <span class="n">region</span><span class="p">,</span>
     <span class="n">gender</span><span class="p">,</span>
     <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
 <span class="k">FROM</span> <span class="n">tablename</span> 
 <span class="k">GROUP</span> <span class="k">BY</span> 
     <span class="k">SUBSTRING</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
     <span class="n">gender</span><span class="p">;</span>
</code></pre></div></div>
</li>
<li>그루핑을 하고 나면, 깔끔하게 정렬을 해주는 게 좋다<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">SELECT</span> 
     <span class="k">SUBSTRING</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">region</span><span class="p">,</span>
     <span class="n">gender</span><span class="p">,</span>
     <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
 <span class="k">FROM</span> <span class="n">tablename</span>
 <span class="k">GROUP</span> <span class="k">BY</span> 
     <span class="n">region</span><span class="p">,</span> <span class="c1">-- MySQL의 경우, GROUP BY 뒤에 바로 alias를 활용하는 것도 가능</span>
     <span class="n">gender</span>
 <span class="k">ORDER</span> <span class="k">BY</span>
     <span class="n">region</span> <span class="k">ASC</span><span class="p">,</span> 
     <span class="n">gender</span> <span class="k">DESC</span> <span class="p">;</span>
</code></pre></div></div>
</li>
</ol>
<h3 id="having"> <a href="#having" aria-labelledby="having" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> HAVING</h3>
<p>: 그루핑 후, 특정 조건의 데이터만 확인</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> 
    <span class="k">SUBSTRING</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">region</span><span class="p">,</span>
    <span class="n">gender</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">tablename</span>
<span class="k">GROUP</span> <span class="k">BY</span> 
    <span class="n">region</span><span class="p">,</span> <span class="n">gender</span>
<span class="k">HAVING</span> <span class="n">region</span> <span class="o">=</span> <span class="s1">'서울'</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="n">region</span> <span class="k">ASC</span><span class="p">,</span> 
    <span class="n">gender</span> <span class="k">DESC</span><span class="p">;</span>
<span class="c1">-- → 이렇게 하면 region이 서울인 데이터만 조회됨</span>
<span class="c1">-- MySQL의 경우, HAVING 뒤에 바로 alias를 활용 가능</span>
</code></pre></div></div>
<p>※ WHERE와 HAVING의 차이:</p>
<ul>
<li>WHERE는 테이블에서 맨 처음 row들을 조회할 때 조건을 설정하기 위한 구문이고,</li>
<li>HAVING은 이미 조회된 row들을 그루핑했을 때 그 그룹들 내에서 다시 필터링할 때 쓰는 구문</li>
</ul>
<h3 id="with-rollup"> <a href="#with-rollup" aria-labelledby="with-rollup" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> WITH ROLLUP</h3>
<p>: 부분 총계를 포함해 그루핑하기</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> 
    <span class="k">SUBSTRING</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">region</span><span class="p">,</span>
    <span class="n">gender</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">tablename</span>
<span class="k">GROUP</span> <span class="k">BY</span> 
    <span class="n">region</span><span class="p">,</span> <span class="n">gender</span> <span class="k">WITH</span> <span class="k">ROLLUP</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="n">region</span> <span class="k">ASC</span><span class="p">,</span> 
    <span class="n">gender</span> <span class="k">DESC</span><span class="p">;</span>
</code></pre></div></div>
<ul>
<li>이렇게 WITH ROLLUP이 들어가면, 세부 그룹들을 좀 더 큰 단위의 그룹으로 중간중간에 합쳐준다.<ul><li>ex) 성*연령 교차 데이터라고 하면, 그냥 그루핑하면 ‘여성-10대’, ‘여성-20대’ 등의 그룹만 생성되는 한편, <br> WITH ROLLUP이 들어가면 ‘NULL-10대’ (성별전체-10대를 의미) 이런 식으로 부분총계 값 생성됨</li></ul>
</li>
<li>WITH ROLLUP은 GROUP BY 뒤에 나오는 그루핑 기준의 순서에 맞춰서 계층적인 부분 총계를 보여줌<ul><li>ex) <code class="language-plaintext highlighter-rouge">GROUP BY gender, age</code> 순서면 ‘여성-NULL’(=여성-나이전체)는 출력되지만, ‘NULL-여성’(=나이전체-여성)은 출력되지 않는다</li></ul>
</li>
</ul>
<div class="code-example">
<p>+) ‘Null값을 나타내는 NULL’과 ‘WITH ROLLUP의 결과로 부분 총계를 표현하기 위해 쓰인 NULL’ 구분:</p>
<ul><li>GROUPING() 함수 사용:<ul><li>그 인자를 그루핑 기준에서 고려하지 않은 부분 총계인 경우에 1을 리턴, 그렇지 않은 경우 0을 리턴. <br> (같은 NULL이더라도 원래 NULL이 있던 곳은 0이 출력되고, 부분 총계를 나타내기 위해 NULL이 쓰인 곳은 1이 출력됨)</li></ul>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">SELECT</span> 
      <span class="nb">YEAR</span><span class="p">(</span><span class="n">sign_up_day</span><span class="p">)</span> <span class="k">AS</span> <span class="n">s_year</span><span class="p">,</span> 
      <span class="n">gender</span><span class="p">,</span>
      <span class="k">SUBSTRING</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">region</span><span class="p">,</span>
      <span class="k">GROUPING</span><span class="p">(</span><span class="nb">YEAR</span><span class="p">(</span><span class="n">sign_up_day</span><span class="p">)),</span> <span class="k">GROUPING</span><span class="p">(</span><span class="n">gender</span><span class="p">),</span> <span class="k">GROUPING</span><span class="p">(</span><span class="k">SUBSTRING</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
      <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
  <span class="k">FROM</span> <span class="n">tablename</span> 
  <span class="k">GROUP</span> <span class="k">BY</span> 
      <span class="n">s_year</span><span class="p">,</span> <span class="n">gender</span><span class="p">,</span> <span class="n">region</span> <span class="k">WITH</span> <span class="k">ROLLUP</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">s_year</span> <span class="k">DESC</span><span class="p">;</span>
</code></pre></div></div>
</li></ul>
</div>
<h2 id="select문-각-절의-작성-순서"> <a href="#select%EB%AC%B8-%EA%B0%81-%EC%A0%88%EC%9D%98-%EC%9E%91%EC%84%B1-%EC%88%9C%EC%84%9C" aria-labelledby="select문-각-절의-작성-순서" class="anchor-heading"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SELECT문: 각 절의 작성 순서</h2>
<p>(+. 해석/실행되는 순서도 별도로 표시)</p>
<ol>
<li>SELECT: 모든 컬럼 또는 특정 컬럼들을 조회 (해석 순서: 5)<ul>
<li>SELECT 절에서 컬럼 이름에 alias를 붙인 게 있다면, 이 이후 단계(ORDER BY, LIMIT)부터는 해당 alias를 사용할 수 있다</li>
<li>MySQL에서는 GROUP BY나 HAVING에서도 SELECT절에서 붙인 alias를 사용 가능</li>
</ul>
</li>
<li>FROM: 어느 테이블을 대상으로 할 지 결정 (해석 순서: 1)</li>
<li>WHERE: 해당 테이블에서 특정 조건(들)을 만족하는 row들만 선별 (해석 순서: 2)</li>
<li>GROUP BY: row들을 그루핑 기준에 따라 그루핑 (해석 순서: 3)</li>
<li>HAVING: 그루핑 작업 후 생성된 여러 그룹 중에서, 특정 조건(들)을 만족하는 그룹만 선별 (해석 순서: 4)</li>
<li>ORDER BY: 각 row를 특정 기준에 따라 정렬 (해석 순서: 6)</li>
<li>LIMIT: 이전 단계까지 조회된 row들 중 일부 row만 선별해서 출력 (해석 순서: 7)</li>
</ol>
<p>+) 그 외 작성 순서: <a href="https://dev.mysql.com/doc/refman/8.0/en/select.html" target="_blank">https://dev.mysql.com/doc/refman/8.0/en/select.html</a></p>
<hr>
<footer><p class="text-small text-grey-dk-000 mb-0">Copyright © 2021 Chaeyun.<br>This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a Jekyll theme.</p></footer>
</div>
</div>
<div class="search-overlay"></div>
</div>
</body>
</html>
